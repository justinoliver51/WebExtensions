package com.IBTrading.servlets;

public class TradeParsers {
	// Passed parameters
	private String traderID;
	private String tradeString;
	
	// Parsed trade information
	public String symbol = null;
	public int quantity = 0;
	
	// Valid trade - true if parsed correctly, false otherwise
	public boolean isValidTrade = false;
	
	// List of trader identifiers and their strings
	private String ROBERTMAXWELL = "robertmaxwell";
	private static String robertmaxwellLastTraderString;
	
	
	public TradeParsers(String newTraderID, String newTrade)
	{
		// If either of the passed values are null, exit
		if( (newTraderID == null) || (newTrade == null) )
			return;
		
		traderID = newTraderID;
		tradeString = newTrade;
		
		// Parse the new trade string
		if(traderID.equalsIgnoreCase(ROBERTMAXWELL))
		{
			RobertMaxwellParser parser = new RobertMaxwellParser();
			parser.parseTrade(newTrade);
		}
	}
	
	public class RobertMaxwellParser
	{
		// Example trade string from RobertMaxwell:
		// 08/28 Bought 15000 shares DGLY at 9.6667 - SWING DONT CHASE  downside 8.25 target 10  if works.....- DGLY only 2.1m shares o/s and same product as TASR camera and patent link
		
		
		public void parseTrade(String newTrade)
		{
			// If we are given an invalid value, return
			if(tradeString == null)
				return;
			
			// If we have already parsed this string, return
			if(newTrade.equalsIgnoreCase(robertmaxwellLastTraderString))
				return;
			
			String[] tokens = tradeString.split("[ ]");
			System.out.println(tokens);
			
			symbol = "DGLY";
			quantity = 10;
			isValidTrade = true;
		}
	}
}